<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Óptica Rois</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body>
    <%- include("header") %>
        <!-- Header-->
        <header class="py-3">
          <div class="container" style="border: 2px solid black; background-image: url('images/fondoIndex.jpg'); width: 80%; height: 200px; border-radius: 10px; margin: 0 auto; text-align: center; font-family: 'Arial', sans-serif;">
              <div class="d-flex flex-column justify-content-center align-items-center h-100 ">
                  <h1 class="text-dark" style="font-size: 4vw; font-weight: bold;">Óptica Rois</h1>
              </div>
          </div>
        </header>
        <!-- Section-->
        <section class="py-6">
            <div class="container px-4 px-lg-5 mt-5" style="margin-left: 200px; margin-left: 200px;">
                <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                    <% result.forEach(function(item) { %>
                      <div class="col mb-5" style="height: 500px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); margin-bottom: 20px;">
                                    <div class="card h-100" style="border: 2px solid white;">
                                      
                                      <!-- Product image-->
                                      <div style="height: 200px; display: flex; align-items: center; justify-content: center;">
                                        <img class="card-img-top" src="images/<%= item.image %>" alt="images" style="max-height: 100%; max-width: 100%;">
                                      </div>

                                      <!-- Product details-->
                                      <div class="card-body p-4 d-flex flex-column align-items-center">
                                        <!-- Product name-->
                                        <h5 class="fw-bolder"><%= item.name %></h5>
                                        <!-- Product price-->
                                        <% if(item.sale_price){ %>
                                          <h3 style="text-decoration: line-through;">$<strong><%= item.price.toLocaleString() %></strong></h3>
                                          <h3>$<strong><%= item.sale_price.toLocaleString() %></strong></h3>

                                        <% } else { %>
                                          <h3>$<strong><%= item.price.toLocaleString() %></strong></h3>
                                        <% } %>
                                        <div style="margin-top: auto; display: flex; flex-direction: column; align-items: center;">
                                            <div>
                                              <form action="/add_to_cart" method="post">
                                                <input type="hidden" name="id" value="<%= item.id %>">
                                                <input type="hidden" name="name" value="<%= item.name %>">
                                                <input type="hidden" name="price" value="<%= item.price %>">
                                                <input type="hidden" name="sale_price" value="<%= item.sale_price %>">
                                                <input type="hidden" name="quantity" value="1">
                                                <input type="hidden" name="image" value="<%= item.image %>">
                                                <input type="submit" value="Añadir al carrito" class="btn btn-outline-dark">
                                              </form>
                                            </div>
                                            <div>
                                              <form action="/view_product" method="post">
                                                <input type="hidden" name="id" value="<%= item.id %>">
                                                <input type="submit" value="Ver detalle" class="btn btn-outline-dark">
                                              </form>
                                            </div>
                                          </div>
                                          
                                      </div>
                                    </div>
                                </div>
                    <% }) %>
                </div>
            </div>
        </section>
        <%- include("footer") %>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
